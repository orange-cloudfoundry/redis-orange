---
name: ((deployment_name))

instance_groups:
- name: redis
  azs: [((default_az))]
  instances: ((node_count))
  vm_type: ((default_vm_type))
  stemcell: default
  persistent_disk_type: ((default_persistent_disk_type))
  networks:
  - name: ((default_network))
  jobs:
  - name: redis
    release: redis-service
    consumes:
      redis_sentinel_conn: {from: ((shared_sentinel_master)), deployment: ((shared_sentinel_deployment))}
      sentinel_slave_conn: {from: ((shared_sentinel_slave)), deployment: ((shared_sentinel_deployment))}
    properties:
      bind: ((redis_bind))
      port: '0'
      password: ((redis_password))
      admin_password: ((redis_admin_password))
      exporter_password: ((redis_exporter_password))
      maxmemory: ((redis_maxmemory))
      maxmemory_policy: ((redis_maxmemory_policy))
      replication: true
      replica_password: ((redis_replica_password))
      sentinel_password: ((redis_sentinel_user_password))
      tls: true
      tls_dh_length: ((redis_dh_length))
      tls_replication: true
      tls_keys:
        certificate: |
          -----BEGIN CERTIFICATE-----
          MIIECjCCAfICFGusl0TjbsYRkOhMhkP+fDlkgGhaMA0GCSqGSIb3DQEBCwUAMDkx
          EzARBgNVBAoMCm9yYW5nZS5jb20xIjAgBgNVBAMMGXJlZGlzLXNlbnRpbmVsLXNo
          YXJlZC10bHMwHhcNMjAwOTEwMTEyMzE2WhcNMjEwOTEwMTEyMzE2WjBKMRMwEQYD
          VQQKDApvcmFuZ2UuY29tMSIwIAYDVQQLDBlyZWRpcy1zZW50aW5lbC1zaGFyZWQt
          dGxzMQ8wDQYDVQQDDAZTZXJ2ZXIwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEK
          AoIBAQCwHOqBvXXcHchmn10eUgZDv4100wJPjUx6P14QuymxQ7y5troCkuuA69ds
          nV7QUhRroGsQx9wvciCVg8lD1qHleNUVglWCoMC1pIVFmaA6BaRzesgCh74u5mIK
          aHN+gW7Hn/SaH/OGzAO7+/kmGPQogqiKUSuB0eE3F1TEShjtLfE0Uc5fxugzLgVz
          OEE4iKyGVEjScCr91Lt8ZCkhBoVk/VnxwKh4QsWpkJ2htXR2Z1LuAdqjDkXFmUXO
          2yqt+S+WazYbqKjd0CEMMJVjWOu1pkKLGKAyQV1N1M3ao8LQPYfy4sTVuXnt9fiP
          kfckB33QkwzLqbkKUuHsim6fyJ8/AgMBAAEwDQYJKoZIhvcNAQELBQADggIBAKT/
          Q79M/zMXPDDhIlQVUGoI8chfiKXu5ntv5+yAfXUhuOypOPLnGw3yCHLrQ1W42u0v
          OIjHmSkQKRQIl2uU8xF+TqAFVb7STDZ16dTuUu8MtphZFPw5pkcWQ+1CMHeEXtlr
          Bjf9CvZ0sT+JSJICD6GllxdQJbZiSK+bfoAei00nQGyBHdUh1L5sfutM7uO0+jiY
          RecSWi4Jhg8VdiRH8J+QiY5ftDWkcwsVBQz2kiSkmAD6AudmL3GfBzq6kz7X2Z3/
          9ntewzpMOjWERvFuHSUqFdkE3WxBzyVeDpK/DCJBlwEmiIf6cOdfKOrJb77epakA
          JaNo8yUKlevIu3GYJOaapnChyillUQo+EAILjViMEg7nBTIleUmy3CoVkaO+Doj0
          r5HBFHyW1f7EZ9TwOVmYg+nZAV/KYmjJUB83qN7EjdUKNkPaX+cAqEnAtPjaECR+
          u2veGydyfIkZcyNmSGHjfZ+Zs6Zc51NoXgCpu2hl+MRGvYwj5a7YrsCZM3KRcjDK
          k3q9mL2nohQoJ0K2/23u6vSGse8gtAfIqCgZ4yFFd9+PxGsXq18nvk5jPkCny2PK
          3FDEd9DZIA9vZg/Q5oRbCJuG/PK3jpLwhR6053RbplJjcyxMmoS5XkczFoeJrvHK
          23KUtI6WlxWxTxci9ZVWmm/l/qirZdB9B330DBaJ
          -----END CERTIFICATE-----
        private_key: |
          -----BEGIN RSA PRIVATE KEY-----
          MIIEowIBAAKCAQEAsBzqgb113B3IZp9dHlIGQ7+NdNMCT41Mej9eELspsUO8uba6
          ApLrgOvXbJ1e0FIUa6BrEMfcL3IglYPJQ9ah5XjVFYJVgqDAtaSFRZmgOgWkc3rI
          Aoe+LuZiCmhzfoFux5/0mh/zhswDu/v5Jhj0KIKoilErgdHhNxdUxEoY7S3xNFHO
          X8boMy4FczhBOIishlRI0nAq/dS7fGQpIQaFZP1Z8cCoeELFqZCdobV0dmdS7gHa
          ow5FxZlFztsqrfkvlms2G6io3dAhDDCVY1jrtaZCixigMkFdTdTN2qPC0D2H8uLE
          1bl57fX4j5H3JAd90JMMy6m5ClLh7Ipun8ifPwIDAQABAoIBAQCoBY5+5YFS1l9h
          +V1gFiW/8TtGYCLuPwLeByL5l3d5lgSysnDZD878GwZWq/XPjt/Ipy4+vk+GPL51
          p1wYCug/BH9XnBd1H2V8Z1B3TNCfSs7RFi1IrLV4DXkwMOMvqNFGR4eYnC89Rduy
          N/5GqLwZAj9GZ5a4rsLOSsYm2ALcFMmezdozYIuxd47pD7n6RnFMYdXb/lbfh96C
          DyJ0Izi3b//fi6KuBoVmHn/6jNREJ23ZFfouTtBv6NMqPzivg7juX4UOKGsC59Hb
          UP1tgqbUlZEbF/03oZ4KCzAiRUtadzNHupSYMuEo+UQRp/VXu94XYHIMkuphbM2S
          iDWlFcuxAoGBANpx/UdJGfw+Ea7hww4m9D31t6lJ/Ri4BWHsoNwFbQllZQoB/i0c
          Q/njFq/WDJYHo2hg2vM5mWcLkpcTORmPMCJiRwKu3t9YB/mw//pmQChvrEXWqB8Z
          uAPiguhlnoKPEbHH0C+cC/VAkfv4/SX+oA3CUbfqH71WdBJQuntq+BSVAoGBAM5j
          1gKCnU06zo+0plfaEU9H9T04sRivVVTaeiJPG2z4OwGMjHgPjMOVhnkxoP8NUGhs
          oKnEXLoczMjoUQ+91sQBZRTZneZVNCZku/r9W8Ktv7n/c2CQagNNGVZD8L+QSYNa
          a2ttcsBZIup0c35WDCsaRhudL1LJc11GJv56CPuDAoGAWxatRsx0yXoYZZQ+geg8
          cJnFvBHeODCEDhFeAmFA1moxd7rdAnKG5eyLyUa4eNc2jI/WvRWHojBxMA4UAVRz
          /eJ9OeExjnBm4verxf5dQn9OltCrykwvL2+EpuO49TgzaK6pYTDwy5PhS/DHntBO
          bW5aJRa7pXgnbnu7RzuTtwECgYBQNq8TdK4sOOHVKlHILSGzHXVr4N+7h1Fz1CHJ
          udMf6+4K8RQbCXgc/70u1yIKXqNUonti38VmNBFHODthEdgpf51ImDdtMMo+7cG9
          j8CdDihI4sZ1zkrVk554T5l+6lYX7gl3zCbgKQSP+Mh2Xn0GN4Tt8I5W76Kdqsk2
          +DkLfwKBgDZZCdXS9GlSm68o2mWOVKMXeKzbcoVtelAIlLRPX83fjiX7Fm4s12xn
          9Wt53x1MWVoLXA6z1Y226cqK2LxmfgG4e/sIIFO5QtFDHb7uRBx/9q849oz2Dp14
          wTZd7EQaXEnRPEuurhUNjfE3S9SU/qYEyBFOoO0o6IPAbbkNZKpT
          -----END RSA PRIVATE KEY-----
        ca: |
          -----BEGIN CERTIFICATE-----
          MIIFUzCCAzugAwIBAgIUGfpxaumpt2PF62TT2fDJV5DvfH0wDQYJKoZIhvcNAQEL
          BQAwOTETMBEGA1UECgwKb3JhbmdlLmNvbTEiMCAGA1UEAwwZcmVkaXMtc2VudGlu
          ZWwtc2hhcmVkLXRsczAeFw0yMDA5MTAxMTE5MzFaFw0zMDA5MDgxMTE5MzFaMDkx
          EzARBgNVBAoMCm9yYW5nZS5jb20xIjAgBgNVBAMMGXJlZGlzLXNlbnRpbmVsLXNo
          YXJlZC10bHMwggIiMA0GCSqGSIb3DQEBAQUAA4ICDwAwggIKAoICAQC/Fkl+u4iU
          Hv3FpHnQoGVQE8p+vuPYorECZ6T2AjN+o0cGERuKIqGxNoxN3keltcCtN451fvid
          K9j3epDUPp3RRKoqInqq+uQtwLpUXexdpmnYJ8uZUdc8jSzrc0gv9uZetw/tHNBU
          CGKKwd44+Q5Zet9QPglsQvOKU/cZEUCw+a3ORzXzelXxr3nuMbBUyUQtUpqpHDEl
          QViddjjTBDCmVpP6grYsyteHzVoL6k5kDf+2V7kssQbDepCWsqjKhz+Tkaa3bPq1
          iIpIIFDAYK+HX3lIFYrPrBobd0e47He1qSAzxoGCWyNzqciukzKB5KT5E5/LybNx
          v4rH84xIkRZGViA/P0AgM4NmfjTCA/RizU8C9VJQc9lwsV9GftiG0Rd2ooL9sI6E
          bY9QKbo5qlw3EBwsjcXHM1zGQXBM6/Ps1f83Cr73E/jlzPvyWBm7FBz/NNepy6Gp
          MClZWp7BF1+O68dpF07uZF0GheAPhup2eRoDBIA3XzEzfcnbbFwGu4mUEOmhQSC5
          TUxIKUUyvt+GBJxOtbgxnqc/teTuHdGQM31nMfLO5cI+xlymBB47qyjxww7NjXiP
          jwCvtFwNE79SNYlGxQHGhY2vKEr8lPhfauFQvdIGmGQUhdf6vU/9ppErBzvz7aPN
          IC0xn53Zl+DyTIwQhCdMxT1LUzfOtSLw9wIDAQABo1MwUTAdBgNVHQ4EFgQUo9s4
          8M+ZGMEYFzxONvBxDuNsXBMwHwYDVR0jBBgwFoAUo9s48M+ZGMEYFzxONvBxDuNs
          XBMwDwYDVR0TAQH/BAUwAwEB/zANBgkqhkiG9w0BAQsFAAOCAgEAi3ZvWAsMly9y
          2xHNwc7KfUGN2nSK6ssCwnz+Ni9lAGbHzn0/byqfnfT0pghqtfp7mD0sYvpkKv9+
          iI47hKoJ7xwcvKXGnWORBHMqEIdiZwxynm+w06/NU1bDfYyt1YZkqiAxIoYu6EUS
          ItyDBsSM/2DYNsv+OyF5zyhH9MjPdSGORW4TWrED00JiydRXV9Q3vDb1SW+o6CDO
          /PWitlgY3ssMmKmrFaQzCvv/Y/w4WMyyywty6+vnXcO1KXyDfCB2MnjEe326CAtZ
          2LsxCRUOJdDqTjEreDuXbBmiOsI1m9p1UYihHbQCuWVV10vGlU0+rLn19PTne6BS
          F9EOsMoTzkd+5OUK09H18Fw677fONpZ0PeufJSLE3BM8OsoYVaCRPsFsnJst9VH4
          BWYoSsIQYOFav9zA4u55jnrNkKFt6moaIrtkuqJKDOUTnnkAUDwjTn+QN22OcRmH
          Eyh4E2hdyTPYM1csPOSkMsOleNMohxk+1oXCWswMeqvTe5zeNPdJ5+ogoZS7j7tm
          IGNHgNcC5Wfi2eT+fKsDdKBCgeK+XMTmOjUtRle+h+Q3O7T74U5NexVrHf+R10K7
          DflJPxUrSbxH0phFgxqKFykhcQfEXzLan/th+B1cnp2+y2kIpNpkxUnRGAh+iKtL
          PTDhxGQ3hAlmpK4bZK8DXEBYIsiGRCM=
          -----END CERTIFICATE-----
  - name: redis_check
    release: redis-service
    consumes:
      redis_sentinel_conn: {from: ((shared_sentinel_master)), deployment: ((shared_sentinel_deployment))}
      sentinel_slave_conn: {from: ((shared_sentinel_slave)), deployment: ((shared_sentinel_deployment))}
    properties:
      tls_keys:
        certificate: |
          -----BEGIN CERTIFICATE-----
          MIIECjCCAfICFGusl0TjbsYRkOhMhkP+fDlkgGhcMA0GCSqGSIb3DQEBCwUAMDkx
          EzARBgNVBAoMCm9yYW5nZS5jb20xIjAgBgNVBAMMGXJlZGlzLXNlbnRpbmVsLXNo
          YXJlZC10bHMwHhcNMjAwOTEwMTEyMzQwWhcNMjEwOTEwMTEyMzQwWjBKMRMwEQYD
          VQQKDApvcmFuZ2UuY29tMSIwIAYDVQQLDBlyZWRpcy1zZW50aW5lbC1zaGFyZWQt
          dGxzMQ8wDQYDVQQDDAZDbGllbnQwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEK
          AoIBAQCdqvQ4kSMVLrKD8aVVdFmPGHnG/wN0NHBdfYvmDw2ZU4z/EpJJ2X+ZVe0J
          WC1ik23FzIYxQ1v5MlZMBlASKqR8iXD928yzarc6s49DYzRtOHdDPYQC2BlB3jjk
          ZkZ9KXD+DJtcNfOIsOCAaszVi7E+P/TDZXk2vBIWotUCFdb2doBWUpbofF8TGU94
          QjVRKDaR5U8E03jROltwXKsJDnDqM0WD3zwrfKe2iKFmM65nxvsRsD6Uk6iNzuH0
          fD0/69/2NkReBmmVHg2gupwIZP/vpV9cYJVSiSnyJwPfIjZ3Jq2ry8tMYpgeDhmb
          dZxrTItL4uFx5jcPywWnvO28AJ8bAgMBAAEwDQYJKoZIhvcNAQELBQADggIBALk+
          vF0PlF6hhYFFZkIbN8EJ7p6/OFDWEZwEf+ix3Icmnlrg29ZuuczgGxqVR52Mm3uv
          S+lN37F6g9EI/hVlMrPPCGe7mTq5KsMKirsxJ6PNoMS/Hqc/SmaxXmpFgUbQ5VYe
          c1Rv+EIL8ZzAeXGiQe7X6seadON+hxy+CQfAdRlRyd1JESeG9kMy+X7IcOaCAbE9
          e6jpGvWAJOzBcyku7tHQg/f5yXTYeDEw/gisIbTab8XwbCW22d2TUbtiSkD/fVtm
          7MXjjedubZv15wQDK94socNGtS2tjDCfnzkvhvnEXvk8QPR60WBLbmnfg7W8CqRo
          rR2AuZmKevbm0dYxXDtp/Yigwvc9TIyp/jE0kO6Dbzi/R6yDzqeYn9F0y35QtdQE
          Xi/AF7bu2EihLuJjuZVZiPRyqRaDc9WuaNNe7V4dOq5GmRN+2oPcp2f+A6MOqqEY
          15TS8aTbKpASyBrV3Yv3SFey6V9KkveRnSqPzfxTSAILJNtuOvsFioDbPWv3DQ+y
          YyufbsXQ5sJLfFXCcoa/Z1KdlU+QnBZ6Y+1TDcBdP8h977zkTuI516ioT7A+RoKS
          +xYum3ilIC9b4q23cb1WSKDb+uEi3hoXE8DBdkaRvtrc5XPb1T6PK1MGD324nY3a
          vB4voPRXVNpg6+mtjWdmTr75j11XqVRIH5XgAb8U
          -----END CERTIFICATE-----
        private_key: |
          -----BEGIN RSA PRIVATE KEY-----
          MIIEowIBAAKCAQEAnar0OJEjFS6yg/GlVXRZjxh5xv8DdDRwXX2L5g8NmVOM/xKS
          Sdl/mVXtCVgtYpNtxcyGMUNb+TJWTAZQEiqkfIlw/dvMs2q3OrOPQ2M0bTh3Qz2E
          AtgZQd445GZGfSlw/gybXDXziLDggGrM1YuxPj/0w2V5NrwSFqLVAhXW9naAVlKW
          6HxfExlPeEI1USg2keVPBNN40TpbcFyrCQ5w6jNFg988K3yntoihZjOuZ8b7EbA+
          lJOojc7h9Hw9P+vf9jZEXgZplR4NoLqcCGT/76VfXGCVUokp8icD3yI2dyatq8vL
          TGKYHg4Zm3Wca0yLS+LhceY3D8sFp7ztvACfGwIDAQABAoIBAClS+kmtOK2/nIha
          mIPqR+Lqflh61FPrvpuyYS1+Ook6TdU47+CtQfVVgRgW5WZVz8qtDWryBbQtzlKE
          wQ3R4WTGvTe8GU3ZJYccMuttn/sUdqXIBMaeDxilfvHWIJmDeBsOANZNSbRE78KY
          u3Eo+N6g8q0X9oozBuap7Pxr7viPs0MPW46l/8c3ltgKbap18gboHA6w1fquJCrk
          ksnEw7yyZw5PkIRccz3FyT28nOMe+FGtv3pir6Z9AZ4WHKiB3GWLraDotNe5Z5cG
          TOeYcVhSt+B22xF15n7Zt3AYprAYxBsruCu8c8qLAz6kQ9ZsjAhaARgnXl3GHGoV
          8+WYyoECgYEAzR63NTCbpTUhSzjoPx2iSdEXH5fydTjYzjlIzFlvIT06cvZKLvqX
          QmI1tBio3vE1p+AQLtK8o070gYuy0VLxXHXDFXKepA7DRXYnChwRJ2phjky8zI2b
          l0yIIWpaaJxIHHGKC62KinpmUCId6snP0LRaI+3GK5lQcIPRrfzqnEECgYEAxMb8
          Wb6mlJ6fcXtZdZls2X/1JNjAz+qlvPN2r5ILlCasT5GziDTzSrzq1vRcZ/JFJVcu
          ct1ODi9jXo9U6J2E/CQIAi9YmnY11MDlc6P3EkplAQxR/C6gC3Hbaz6iWr4wIcdt
          Qxf8h5DsqPHJSEgTEfGYqmhDaxUe/zEWmp7mFFsCgYEAoDnDEMh0fFuBM1oziMHk
          OFcdAe/WVBzgtk5nAEFIHqXOV2jtz76tkwxWOOUeXG/84rKS0ZCKC+Mr+VmfiAWL
          RhczGTjclPh3LnY5zprYB3sA04A75mkjRc9hcwC5uIeDiLxkAfVAiCVOcIAF8JZO
          QA/xbalZqErtW8aMbqVmukECgYB22K/FDE7T6FHoWlWXn0iMvKm0zWz2poPfcTQ3
          qf9wRUNA84D5PPHMK/myRfghl8OHX/ZfzaW9D4X2sJ7Zt3mAR8rGdw4OjGLK0o5C
          n78zvtbuISDLLOXgw62AQl4QbFnprOci5LPStQcaqp2lGFLcPYy1Ly+41xLXkjBS
          xrGzjQKBgGgrcycd/QZ2QpR336P3IFbPWQjN4NlrgDa8BD47pZkoGD7tUxJ8F6Uk
          CaX+rklEzWgv9RgWEPwwSsZD9z8j+UWmIbopODsoWlhUzaV2ngP++cB/ngrEfCso
          c4Qvfs0Fo8IeWMrGuGU7+zqoXQ4ZdWrPbwkzg4fC1Pxmw3Kb8K39
          -----END RSA PRIVATE KEY-----
        ca: |
          -----BEGIN CERTIFICATE-----
          MIIFUzCCAzugAwIBAgIUGfpxaumpt2PF62TT2fDJV5DvfH0wDQYJKoZIhvcNAQEL
          BQAwOTETMBEGA1UECgwKb3JhbmdlLmNvbTEiMCAGA1UEAwwZcmVkaXMtc2VudGlu
          ZWwtc2hhcmVkLXRsczAeFw0yMDA5MTAxMTE5MzFaFw0zMDA5MDgxMTE5MzFaMDkx
          EzARBgNVBAoMCm9yYW5nZS5jb20xIjAgBgNVBAMMGXJlZGlzLXNlbnRpbmVsLXNo
          YXJlZC10bHMwggIiMA0GCSqGSIb3DQEBAQUAA4ICDwAwggIKAoICAQC/Fkl+u4iU
          Hv3FpHnQoGVQE8p+vuPYorECZ6T2AjN+o0cGERuKIqGxNoxN3keltcCtN451fvid
          K9j3epDUPp3RRKoqInqq+uQtwLpUXexdpmnYJ8uZUdc8jSzrc0gv9uZetw/tHNBU
          CGKKwd44+Q5Zet9QPglsQvOKU/cZEUCw+a3ORzXzelXxr3nuMbBUyUQtUpqpHDEl
          QViddjjTBDCmVpP6grYsyteHzVoL6k5kDf+2V7kssQbDepCWsqjKhz+Tkaa3bPq1
          iIpIIFDAYK+HX3lIFYrPrBobd0e47He1qSAzxoGCWyNzqciukzKB5KT5E5/LybNx
          v4rH84xIkRZGViA/P0AgM4NmfjTCA/RizU8C9VJQc9lwsV9GftiG0Rd2ooL9sI6E
          bY9QKbo5qlw3EBwsjcXHM1zGQXBM6/Ps1f83Cr73E/jlzPvyWBm7FBz/NNepy6Gp
          MClZWp7BF1+O68dpF07uZF0GheAPhup2eRoDBIA3XzEzfcnbbFwGu4mUEOmhQSC5
          TUxIKUUyvt+GBJxOtbgxnqc/teTuHdGQM31nMfLO5cI+xlymBB47qyjxww7NjXiP
          jwCvtFwNE79SNYlGxQHGhY2vKEr8lPhfauFQvdIGmGQUhdf6vU/9ppErBzvz7aPN
          IC0xn53Zl+DyTIwQhCdMxT1LUzfOtSLw9wIDAQABo1MwUTAdBgNVHQ4EFgQUo9s4
          8M+ZGMEYFzxONvBxDuNsXBMwHwYDVR0jBBgwFoAUo9s48M+ZGMEYFzxONvBxDuNs
          XBMwDwYDVR0TAQH/BAUwAwEB/zANBgkqhkiG9w0BAQsFAAOCAgEAi3ZvWAsMly9y
          2xHNwc7KfUGN2nSK6ssCwnz+Ni9lAGbHzn0/byqfnfT0pghqtfp7mD0sYvpkKv9+
          iI47hKoJ7xwcvKXGnWORBHMqEIdiZwxynm+w06/NU1bDfYyt1YZkqiAxIoYu6EUS
          ItyDBsSM/2DYNsv+OyF5zyhH9MjPdSGORW4TWrED00JiydRXV9Q3vDb1SW+o6CDO
          /PWitlgY3ssMmKmrFaQzCvv/Y/w4WMyyywty6+vnXcO1KXyDfCB2MnjEe326CAtZ
          2LsxCRUOJdDqTjEreDuXbBmiOsI1m9p1UYihHbQCuWVV10vGlU0+rLn19PTne6BS
          F9EOsMoTzkd+5OUK09H18Fw677fONpZ0PeufJSLE3BM8OsoYVaCRPsFsnJst9VH4
          BWYoSsIQYOFav9zA4u55jnrNkKFt6moaIrtkuqJKDOUTnnkAUDwjTn+QN22OcRmH
          Eyh4E2hdyTPYM1csPOSkMsOleNMohxk+1oXCWswMeqvTe5zeNPdJ5+ogoZS7j7tm
          IGNHgNcC5Wfi2eT+fKsDdKBCgeK+XMTmOjUtRle+h+Q3O7T74U5NexVrHf+R10K7
          DflJPxUrSbxH0phFgxqKFykhcQfEXzLan/th+B1cnp2+y2kIpNpkxUnRGAh+iKtL
          PTDhxGQ3hAlmpK4bZK8DXEBYIsiGRCM=
          -----END CERTIFICATE-----
  - name: redis_exporter
    release: redis-service
    properties:
      skip_tls_verification: true
      tls_keys:
        certificate: |
          -----BEGIN CERTIFICATE-----
          MIIEDDCCAfQCFGusl0TjbsYRkOhMhkP+fDlkgGhgMA0GCSqGSIb3DQEBCwUAMDkx
          EzARBgNVBAoMCm9yYW5nZS5jb20xIjAgBgNVBAMMGXJlZGlzLXNlbnRpbmVsLXNo
          YXJlZC10bHMwHhcNMjAwOTEwMTEyNDIyWhcNMjEwOTEwMTEyNDIyWjBMMRMwEQYD
          VQQKDApvcmFuZ2UuY29tMSIwIAYDVQQLDBlyZWRpcy1zZW50aW5lbC1zaGFyZWQt
          dGxzMREwDwYDVQQDDAhFeHBvcnRlcjCCASIwDQYJKoZIhvcNAQEBBQADggEPADCC
          AQoCggEBALFTJWAjzyEu0BaLyjsFmgjQrxapRn8B1RIgmuvrfMDx/igjUMtNkPwb
          4U3iodJOJTUa4wQ9CCM0AMuDeLpSvZzeopSCrfvHmoDC2dplaW3oI2vbqu5Spn7j
          YxkjbYr00Udu8bFPTSPuQMAUVhJTmBZn9DIAfTbM6qpBWJiJm9svr0RLOr+wTUiK
          tQm3v7zq0ZV4QtfUlzQUsSxiT+D64P7lWnPG/vaBOK4MekSArRoUmB0kBMvn5pN+
          gtgGfzh5T+RpCbU4dvde9/aFg4WJ+rxp2n2OGQ2Ri3CISwSK0TepwxMyqcX4hxaP
          sgb8zHjmrd2TizCQ1DIvjMVCCMc5NIcCAwEAATANBgkqhkiG9w0BAQsFAAOCAgEA
          PTu9p/SxjokmEdfC3qm4uUTbH5aXFz2IHKn7xPGzpDE2RDVqGygxUXsyRjGeP/hm
          OKloZPkNh5DgwxV9V8wmbMKOMBcEig+G7XduGO/EJZaB9EOw/egNLDQcwBbghHaz
          7fIW760ZXWH1bvkbt0k9tcy40F/y2WheSUSoN+RqvyRyrGSwvHNGzmKeCB3nh0We
          WT1VG8yB7R77Dd6mdLuM+ocS43u1/AHWL/LLJdjALO9Z5AgK2v1qg5w7POBSVwe/
          JvZsSZjyOB0psIINbnehj29X3rEs+PpEh7BdcXnTejAqrhqL1rIu8sH4fzfsDR/B
          3y3CO64KW8qHwadRhWQETdu/u1kwuvGJ3FiQjxZG4Fju9olAbrR283bBj2uKbAJo
          jQbCVyCa7Y1+ac8mk9kuyc9gNGUBTUfWCGxQJZEfqBCNfJFbMJx6MeBKgpHUaUkp
          ARWfIvPScIB4J881sXSLYmD9V1L/YpHrU5f11Sgl8liRZJRe6Pdv1XOwcFEGcJjV
          o1yJy7zWrJfyNZ5DcReU9PSDcr4I/gTo6dFzZbbG+6nrL6opWPqLpQyArH1ew9hA
          MkcNA5/jyxATBDh9ZrH8ayzzkyo1FjKF2GYPII1HtyfJM3GohEFySzRsLYi2uIS8
          B54HBFL4jWqpvTInvTVV0od+Psyuu4X3yNkWxY1Hjzw=
          -----END CERTIFICATE-----
        private_key: |
          -----BEGIN RSA PRIVATE KEY-----
          MIIEpAIBAAKCAQEAsVMlYCPPIS7QFovKOwWaCNCvFqlGfwHVEiCa6+t8wPH+KCNQ
          y02Q/BvhTeKh0k4lNRrjBD0IIzQAy4N4ulK9nN6ilIKt+8eagMLZ2mVpbegja9uq
          7lKmfuNjGSNtivTRR27xsU9NI+5AwBRWElOYFmf0MgB9NszqqkFYmImb2y+vREs6
          v7BNSIq1Cbe/vOrRlXhC19SXNBSxLGJP4Prg/uVac8b+9oE4rgx6RICtGhSYHSQE
          y+fmk36C2AZ/OHlP5GkJtTh291739oWDhYn6vGnafY4ZDZGLcIhLBIrRN6nDEzKp
          xfiHFo+yBvzMeOat3ZOLMJDUMi+MxUIIxzk0hwIDAQABAoIBAFBT0gKTNilaA3mz
          KZFDIFwN7MLfO8gdFGB51LQ6oPDmrrOQC/GM2bjbCF035QZX0BMWcvBglWcdD58h
          l3cQNETztcKA0D/WU+8wVW/RsMjQ9/rML8p2NmYUq7efjOf9rzAk2efwfIliTIK2
          s6bpp2O/A6gDALXqbgNiRrgS3j+TwHrvhacLc9qq9u1OJZ1i72jbMEEs9Juoh96y
          0MnoVRhJ2a53GGDRjud8RGuibkmEXOukiJfFEQxBV/0doXP1F+7Q+3Tbr4nkqsSx
          bZZFgr1sA3BnM3ktd4m2u1RiDFEzs/cYZx6Uz2a/B3rmhK4x03VgzVxU7iBQgdRw
          +nVLwgECgYEA6dOrphhWad5v7zs1Of1skZi02QqQ3OB06tetDFavsgoboWuQpzdX
          OzjfuVR7xnrnFLvdpmEPekOQQRT47u43HavIeYmfuydsG0MvMTosQBErMiznN07B
          BsO+njBWRL9dIvalm4lJ0uRspSOcXNJP7fU1JxLZD79lCAiW53xWiKECgYEAwiPY
          EtaG10obLD7pAfU6HwybdkAUAow3O7+cOh4d8D6KhDACaF9lu5GjTbwnK11pv/Ku
          SpTyJak+ljY1PejL7IN3kSeaWfHaQ3mhW0PR9WsIA7/4Lj7XRcS9fYxHB8kUW9yz
          +mDdfhTmtF1tRVKl6XFnRDN/P4owQGZqBL975CcCgYEA5Fi7GyRPV2pLw8P9cdlE
          KleH3SFNYPauFx1yuEb7o5Htc9E43aPUw1gCW9neWnFxs7TXe4Dz/YF3oacahzMJ
          jidRSyeUXs/b6i/NKXTW++YIWiKx1jhJlxKX16H6zX5YNSnLhr4m4xYB56+EJr2Y
          IxlAxBzK728I+jRxMjUhyKECgYEAgn69eswgjw4M/cy7qsk/bCd5SB8CVEQTzGGb
          jaU40of3a6spsyaMp2vZrSLP4WJE9vUVGqTLr2z32NhPKXIVwMEN2dAY/GSJJdnY
          EBSiSKjNFlgvZkZvRUJdbMqh5CXRPX44rA/4UguSl6JFFNfdFfFYTIug+QDWNjOh
          B9f+WvkCgYBfRcrFCtimXyNLSbiYxcjw/XH3cPilNcFNjArHQ0hVZz9R5kIr2+9w
          lRgyBXuZQ+VZzVgmg98k5+ublzHgEnYVnmHxRq0Bq2bObf1mkRmJ2KVy0HGHxUpJ
          iUJEGoDvza5CgU+Xpjdn4utQcM1NYj24/qzEEzqRj2Er2dJP6tng4g==
          -----END RSA PRIVATE KEY-----
        ca: |
          -----BEGIN CERTIFICATE-----
          MIIFUzCCAzugAwIBAgIUGfpxaumpt2PF62TT2fDJV5DvfH0wDQYJKoZIhvcNAQEL
          BQAwOTETMBEGA1UECgwKb3JhbmdlLmNvbTEiMCAGA1UEAwwZcmVkaXMtc2VudGlu
          ZWwtc2hhcmVkLXRsczAeFw0yMDA5MTAxMTE5MzFaFw0zMDA5MDgxMTE5MzFaMDkx
          EzARBgNVBAoMCm9yYW5nZS5jb20xIjAgBgNVBAMMGXJlZGlzLXNlbnRpbmVsLXNo
          YXJlZC10bHMwggIiMA0GCSqGSIb3DQEBAQUAA4ICDwAwggIKAoICAQC/Fkl+u4iU
          Hv3FpHnQoGVQE8p+vuPYorECZ6T2AjN+o0cGERuKIqGxNoxN3keltcCtN451fvid
          K9j3epDUPp3RRKoqInqq+uQtwLpUXexdpmnYJ8uZUdc8jSzrc0gv9uZetw/tHNBU
          CGKKwd44+Q5Zet9QPglsQvOKU/cZEUCw+a3ORzXzelXxr3nuMbBUyUQtUpqpHDEl
          QViddjjTBDCmVpP6grYsyteHzVoL6k5kDf+2V7kssQbDepCWsqjKhz+Tkaa3bPq1
          iIpIIFDAYK+HX3lIFYrPrBobd0e47He1qSAzxoGCWyNzqciukzKB5KT5E5/LybNx
          v4rH84xIkRZGViA/P0AgM4NmfjTCA/RizU8C9VJQc9lwsV9GftiG0Rd2ooL9sI6E
          bY9QKbo5qlw3EBwsjcXHM1zGQXBM6/Ps1f83Cr73E/jlzPvyWBm7FBz/NNepy6Gp
          MClZWp7BF1+O68dpF07uZF0GheAPhup2eRoDBIA3XzEzfcnbbFwGu4mUEOmhQSC5
          TUxIKUUyvt+GBJxOtbgxnqc/teTuHdGQM31nMfLO5cI+xlymBB47qyjxww7NjXiP
          jwCvtFwNE79SNYlGxQHGhY2vKEr8lPhfauFQvdIGmGQUhdf6vU/9ppErBzvz7aPN
          IC0xn53Zl+DyTIwQhCdMxT1LUzfOtSLw9wIDAQABo1MwUTAdBgNVHQ4EFgQUo9s4
          8M+ZGMEYFzxONvBxDuNsXBMwHwYDVR0jBBgwFoAUo9s48M+ZGMEYFzxONvBxDuNs
          XBMwDwYDVR0TAQH/BAUwAwEB/zANBgkqhkiG9w0BAQsFAAOCAgEAi3ZvWAsMly9y
          2xHNwc7KfUGN2nSK6ssCwnz+Ni9lAGbHzn0/byqfnfT0pghqtfp7mD0sYvpkKv9+
          iI47hKoJ7xwcvKXGnWORBHMqEIdiZwxynm+w06/NU1bDfYyt1YZkqiAxIoYu6EUS
          ItyDBsSM/2DYNsv+OyF5zyhH9MjPdSGORW4TWrED00JiydRXV9Q3vDb1SW+o6CDO
          /PWitlgY3ssMmKmrFaQzCvv/Y/w4WMyyywty6+vnXcO1KXyDfCB2MnjEe326CAtZ
          2LsxCRUOJdDqTjEreDuXbBmiOsI1m9p1UYihHbQCuWVV10vGlU0+rLn19PTne6BS
          F9EOsMoTzkd+5OUK09H18Fw677fONpZ0PeufJSLE3BM8OsoYVaCRPsFsnJst9VH4
          BWYoSsIQYOFav9zA4u55jnrNkKFt6moaIrtkuqJKDOUTnnkAUDwjTn+QN22OcRmH
          Eyh4E2hdyTPYM1csPOSkMsOleNMohxk+1oXCWswMeqvTe5zeNPdJ5+ogoZS7j7tm
          IGNHgNcC5Wfi2eT+fKsDdKBCgeK+XMTmOjUtRle+h+Q3O7T74U5NexVrHf+R10K7
          DflJPxUrSbxH0phFgxqKFykhcQfEXzLan/th+B1cnp2+y2kIpNpkxUnRGAh+iKtL
          PTDhxGQ3hAlmpK4bZK8DXEBYIsiGRCM=
          -----END CERTIFICATE-----
- name: broker
  azs: [((default_az))]
  instances: 1
  vm_type: ((default_vm_type))
  stemcell: default
  persistent_disk_type: ((default_persistent_disk_type))
  networks:
  - name: ((default_network))
  jobs:
  - name: redis_broker-1.5
    release: redis-service
    consumes:
      redis_sentinel_conn: {from: ((shared_sentinel_master)), deployment: ((shared_sentinel_deployment))}
    properties:
      bind: ((redis_bind))
      password: ((redis_broker_password))
      tls_keys:
        certificate: |
          -----BEGIN CERTIFICATE-----
          MIIECjCCAfICFGusl0TjbsYRkOhMhkP+fDlkgGheMA0GCSqGSIb3DQEBCwUAMDkx
          EzARBgNVBAoMCm9yYW5nZS5jb20xIjAgBgNVBAMMGXJlZGlzLXNlbnRpbmVsLXNo
          YXJlZC10bHMwHhcNMjAwOTEwMTEyMzU5WhcNMjEwOTEwMTEyMzU5WjBKMRMwEQYD
          VQQKDApvcmFuZ2UuY29tMSIwIAYDVQQLDBlyZWRpcy1zZW50aW5lbC1zaGFyZWQt
          dGxzMQ8wDQYDVQQDDAZCcm9rZXIwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEK
          AoIBAQCyGJk/mepW1vf9J2QRXvSl/lj1Hs8nfyw4Oph/v6EuNDRcsTBGEM8MR6yB
          gP+XjFoyf7mHuqSjB9HxnoGp1oIuzpD4Jkt2jd5CbQOjMIp+l9SHvozu3km0VOB8
          VRvU0ZjQMbR8caK2Q6lFFUbNtKpTE9U1yLJMa9tur0ct0yaYzPHZoB05JxVO+u/D
          BzEK7FkTc09PgneT6ksZwROLXPa/Oez05otI3A2SnlNHdyeabhzJA5s4pfmc+cD5
          JQaE/GTvrvMGhk4iBB9rEIvEXTWg+dYV5O7eRN9odqRpYT5GuNE++Vp+LaD7Dhhv
          rXob3AAlGHZ1aCSmOhthjRbc9johAgMBAAEwDQYJKoZIhvcNAQELBQADggIBALzi
          1MvPfx6DhtIDNQTS4YqSe2odRp8D958SBUyXiezFlpL6t59q4v0vcBEZzxERVuk+
          n+PPqEeBDlxmMZaNMAvDaaDzE+jvYD/b7p6O975a7SH5N8728ztAe46OBqfvaD3z
          eEzQ5cgzLBbNLwwKjMXy4ZSP8ry/o9RKPIdoj+I9ZxGhgXluZxxRFCtZpZBeRKzh
          JfAbDj2Cs4JcfwVvusuNjb6utwgKXekfvGabKzusNnA76XR5Os0C/kmh796EJCDs
          HXTSWwYTYepU5haQ61QgpL5h8zTrockh+2Txe0oP0WtXN4bBthRsqMtXwtBr6XtH
          Y9aq9d4Ut6OIhS21kQ7jmTcIqlK9tOp+0MYUzxX4Bpg8GnCZMbqFoc9VY/vnXT0S
          thZITE1t4MsGoIjDqWxsb3qGreesdPosmO0q2b/UeAxeW6bA15HLfYycr7AhHul1
          LhRnbRLw50Ias3dKvREf9MQVUju+qlGcdwjUfB62YHyOZKNfFZRlQixldmEVLV5H
          R9fbc8Jih9bVsmhb5L3MF2iIgLD1JBH1e2K+9eObEYjIIEzoNbVaDaY2Op9RH4o9
          gwn8rZ9INYd5flo2366saLuTopZ9q4a7cYScTN78vIXN2XH35Ll9a8l6sRZeUQMY
          AN5EvLNufP/9AWwWx+TjYyWOmAzd/7nD4UgsG7LP
          -----END CERTIFICATE-----
        private_key: |
          -----BEGIN RSA PRIVATE KEY-----
          MIIEowIBAAKCAQEAshiZP5nqVtb3/SdkEV70pf5Y9R7PJ38sODqYf7+hLjQ0XLEw
          RhDPDEesgYD/l4xaMn+5h7qkowfR8Z6BqdaCLs6Q+CZLdo3eQm0DozCKfpfUh76M
          7t5JtFTgfFUb1NGY0DG0fHGitkOpRRVGzbSqUxPVNciyTGvbbq9HLdMmmMzx2aAd
          OScVTvrvwwcxCuxZE3NPT4J3k+pLGcETi1z2vzns9OaLSNwNkp5TR3cnmm4cyQOb
          OKX5nPnA+SUGhPxk767zBoZOIgQfaxCLxF01oPnWFeTu3kTfaHakaWE+RrjRPvla
          fi2g+w4Yb616G9wAJRh2dWgkpjobYY0W3PY6IQIDAQABAoIBABAmaOc6luSPE+fy
          BYIJwVe4K+r2g0SKpMDol2GmSAB/nWv2aXFBHvV3Hm6T+xmMEbXYnUNwqnNaRzCI
          9isnl6CU/NJz7o3uqYQOjLDkuvpl3FD+95rFr5tZww2jTiXLZ/chOsO6Lk4m7pek
          KUqIIpXsC36YF4sUkM6FuIewSSS78h3CWrDaezuoFJFMcSapyCOZjznqPj0MbhOE
          iaym84bm4H5eXDkr1gX5yKYeSOPsxDS6onZFJHRds3pZlZokdeB2yy35TvbLRp1K
          0VCgyLMJUB0PIVVYAwh67iCsCHs1jYb+igBGt7JLhY4/ttX0i+D189QUZl2KrzJW
          6Qzo5wECgYEA61bSWcFfATf9xA/7uEQXMDQPVk7X4pWoFCwPE/NHIEQYp8PE+Px/
          dP8iLXOt6z/jKiLHL4XF9Dkfrm4CMZJ3bnihFZn0m02IcJJmIUFxLwYciqeGhc5b
          x3wgTDDm2McdGMaf4rr5FkQIm48zLimhtDYDBvls2cdmyxHo80uJnJECgYEAwbtB
          iDrHV6uASLdaG+aKFj9VYJ9sgMctyo1D2FgBJ1c6+DRpRG/wmKudokcaY+5v4/ty
          bfxhLKdCR5xdHZXGOM4f7diVGq562NIkgpJWwPV+3ahhqtGQmW5ijU6nv7BeZFHA
          KTM29I1FgUfOHmLazfVLPxDMiTQoGSxFcPuxzJECgYBZuDLfhwoKM+dqDNHhcQwK
          E37ZX5uMRZPbhOSGrZOrKGrh4o/AgLqyxuWnwFdIvYWENdgMNQq/zdtXK5dogLdJ
          hXGcA6KuZoOirx2Chil5TPIqpi1x67cvuRGzGl2XvWlJXcfsr21w4KULcS+I5NRC
          GOlUiljGOe/lcUGHJ4AiEQKBgQCv2anCXphTm/j2CHhimwD88MAu1IdI3YNTOKc8
          2aUycJu2cNycon9iFWUgyCnMS8KEztkvvMb4IVqoZeaf1DP5nCCfZNjzPy2DYjyB
          yRO2UyC1UwJUa6U1oF0UpzDdbto/dXVX8IURtqpAj00ph9HU4bNLq5P9drpvHyBp
          Tg42AQKBgHsJl7fl14uMCrRlbAyoiKyS4Jjsmjw9405x5tfR2KBra4Zrkj5DQmPj
          8kS3tOGruxWYvnRJT8RZ+WhuKW1enB9tU7e3t5rFVgmsNKRaZDqc2J1jQmPbDOHv
          m15wtEXv5X38rTAeriIec4oUp5YL8gOwEl7YUjcDi1JEN2T4WFDV
          -----END RSA PRIVATE KEY-----
        ca: |
          -----BEGIN CERTIFICATE-----
          MIIFUzCCAzugAwIBAgIUGfpxaumpt2PF62TT2fDJV5DvfH0wDQYJKoZIhvcNAQEL
          BQAwOTETMBEGA1UECgwKb3JhbmdlLmNvbTEiMCAGA1UEAwwZcmVkaXMtc2VudGlu
          ZWwtc2hhcmVkLXRsczAeFw0yMDA5MTAxMTE5MzFaFw0zMDA5MDgxMTE5MzFaMDkx
          EzARBgNVBAoMCm9yYW5nZS5jb20xIjAgBgNVBAMMGXJlZGlzLXNlbnRpbmVsLXNo
          YXJlZC10bHMwggIiMA0GCSqGSIb3DQEBAQUAA4ICDwAwggIKAoICAQC/Fkl+u4iU
          Hv3FpHnQoGVQE8p+vuPYorECZ6T2AjN+o0cGERuKIqGxNoxN3keltcCtN451fvid
          K9j3epDUPp3RRKoqInqq+uQtwLpUXexdpmnYJ8uZUdc8jSzrc0gv9uZetw/tHNBU
          CGKKwd44+Q5Zet9QPglsQvOKU/cZEUCw+a3ORzXzelXxr3nuMbBUyUQtUpqpHDEl
          QViddjjTBDCmVpP6grYsyteHzVoL6k5kDf+2V7kssQbDepCWsqjKhz+Tkaa3bPq1
          iIpIIFDAYK+HX3lIFYrPrBobd0e47He1qSAzxoGCWyNzqciukzKB5KT5E5/LybNx
          v4rH84xIkRZGViA/P0AgM4NmfjTCA/RizU8C9VJQc9lwsV9GftiG0Rd2ooL9sI6E
          bY9QKbo5qlw3EBwsjcXHM1zGQXBM6/Ps1f83Cr73E/jlzPvyWBm7FBz/NNepy6Gp
          MClZWp7BF1+O68dpF07uZF0GheAPhup2eRoDBIA3XzEzfcnbbFwGu4mUEOmhQSC5
          TUxIKUUyvt+GBJxOtbgxnqc/teTuHdGQM31nMfLO5cI+xlymBB47qyjxww7NjXiP
          jwCvtFwNE79SNYlGxQHGhY2vKEr8lPhfauFQvdIGmGQUhdf6vU/9ppErBzvz7aPN
          IC0xn53Zl+DyTIwQhCdMxT1LUzfOtSLw9wIDAQABo1MwUTAdBgNVHQ4EFgQUo9s4
          8M+ZGMEYFzxONvBxDuNsXBMwHwYDVR0jBBgwFoAUo9s48M+ZGMEYFzxONvBxDuNs
          XBMwDwYDVR0TAQH/BAUwAwEB/zANBgkqhkiG9w0BAQsFAAOCAgEAi3ZvWAsMly9y
          2xHNwc7KfUGN2nSK6ssCwnz+Ni9lAGbHzn0/byqfnfT0pghqtfp7mD0sYvpkKv9+
          iI47hKoJ7xwcvKXGnWORBHMqEIdiZwxynm+w06/NU1bDfYyt1YZkqiAxIoYu6EUS
          ItyDBsSM/2DYNsv+OyF5zyhH9MjPdSGORW4TWrED00JiydRXV9Q3vDb1SW+o6CDO
          /PWitlgY3ssMmKmrFaQzCvv/Y/w4WMyyywty6+vnXcO1KXyDfCB2MnjEe326CAtZ
          2LsxCRUOJdDqTjEreDuXbBmiOsI1m9p1UYihHbQCuWVV10vGlU0+rLn19PTne6BS
          F9EOsMoTzkd+5OUK09H18Fw677fONpZ0PeufJSLE3BM8OsoYVaCRPsFsnJst9VH4
          BWYoSsIQYOFav9zA4u55jnrNkKFt6moaIrtkuqJKDOUTnnkAUDwjTn+QN22OcRmH
          Eyh4E2hdyTPYM1csPOSkMsOleNMohxk+1oXCWswMeqvTe5zeNPdJ5+ogoZS7j7tm
          IGNHgNcC5Wfi2eT+fKsDdKBCgeK+XMTmOjUtRle+h+Q3O7T74U5NexVrHf+R10K7
          DflJPxUrSbxH0phFgxqKFykhcQfEXzLan/th+B1cnp2+y2kIpNpkxUnRGAh+iKtL
          PTDhxGQ3hAlmpK4bZK8DXEBYIsiGRCM=
          -----END CERTIFICATE-----
  - name: redis_broker_check-1.5
    release: redis-service

variables:
- name: redis_password
  type: password
  parameters:
    length: ((password_length))
- name: redis_admin_password
  type: password
  parameters:
    length: ((password_length))
- name: redis_exporter_password
  type: password
  parameters:
    length: ((password_length))
- name: redis_replica_password
  type: password
  parameters:
    length: ((password_length))
- name: redis_sentinel_user_password
  type: password
  parameters:
    length: ((password_length))
- name: redis_broker_password
  type: password
  parameters:
    length: ((password_length))
- name: ((shared_sentinel_ca))
  type: certificate
  options:
    common_name: ((shared_sentinel_deployment))
    organization: 'orange.com'
    key_length: ((ca_key_length))
    duration: ((certificate_duration))
    is_ca: true
    self_sign: true
- name: redis_keys
  type: certificate
  options:
    ca: ((shared_sentinel_ca))
    common_name: 'Server'
    organization: 'orange.com'
    organization_unit: ((deployment_name))
    key_length: ((private_key_length))
    duration: ((certificate_duration))
- name: redis_check_keys
  type: certificate
  options:
    ca: ((shared_sentinel_ca))
    common_name: 'Client'
    organization: 'orange.com'
    organization_unit: ((deployment_name))
    key_length: ((private_key_length))
    duration: ((certificate_duration))
- name: redis_broker_keys
  type: certificate
  options:
    ca: ((shared_sentinel_ca))
    common_name: 'Broker'
    organization: 'orange.com'
    organization_unit: ((deployment_name))
    key_length: ((private_key_length))
    duration: ((certificate_duration))
- name: redis_exporter_keys
  type: certificate
  options:
    ca: ((shared_sentinel_ca))
    common_name: 'Exporter'
    organization: 'orange.com'
    organization_unit: ((deployment_name))
    key_length: ((private_key_length))
    duration: ((certificate_duration))

stemcells:
- alias: default
  os: ((stemcell_os))
  version: "((stemcell_version))"

releases:
- name: redis-service
  version: latest

update:
  canaries: 2
  canary_watch_time: 60000-120000
  max_in_flight: 2
  update_watch_time: 60000-120000
  serial: false
